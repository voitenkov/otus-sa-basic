# 7. Описание требований в виде Use Case

# 7.1 Бизнес-процесс приемки автомобиля у клиента

## 7.1.1 User Stories

| Код | Наименование | Пользовательские требования |
| --- | --- | --- |
| US01 | Я, как Мастер СТО, хочу работать со справочником клиентов, чтобы вести учет клиентов. | URQ11 Модуль учета наряд-заказов в системе. |
| US02 | Я, как мастер СТО, хочу записывать клиентов на ремонт, чтобы в СТО была информация о предстоящих ремонтах, а клиенты могли выбрать удобное для них время. | URQ9 Модуль планирования загрузки рабочих боксов |
| US03 | Я, как Мастер СТО, хочу работать с наряд-заказами, чтобы учитывать работы и использованные в работах запчасти. | URQ11 Модуль учета наряд-заказов в системе. |
| US04 | Я, как Мастер СТО, хочу работать с отказами клиентов, чтобы накапливать статистику для принятия решений по устранению причин отказов. | //TO DO |

## 7.1.2 Use Cases

Use Case диаграмма:

![Use Case diagram v2.drawio.png](/images/07_use_case_diagram.png)

Use Cases мастера СТО:

| Use case | BUC01.1 Зарегистрировать нового клиента |
| --- | --- |
| FRQ | FRQ11.5 Редактирование справочника клиентов
FRQ11.6 Редактирование справочника автомобилей клиентов |
| User story | US01 Я, как Мастер СТО, хочу работать со справочником клиентов, чтобы вести учет клиентов. |
|  | Описывается сценарий регистрации нового клиента |
| Область действия | Мастер СТО - система |
| Основной актор | Мастер СТО |
| Участники и интересы | Клиент становится зарегистрированным клиентом, чтобы получать все преимущества программы лояльности (скидки, акции), мастер СТО - зарегистрированного клиента, которого в будущем может стать постоянным клиентом, есть возможность связываться с клиентом, чтобы предлагать услуги, получать обратную связь. |
| Предусловие | Клиент обратился и дал согласие на регистрацию |
| Минимальные гарантии | нет |
| Результат | Клиент зарегистрирован |
| Basic flow | 1. Мастер открывает форму регистрации клиента
2. Мастер вводит: данные клиента
3. Система проверяет введенные данные
4. Мастер вводит: данные автомобиля
5. Система проверяет введенные данные
6. Мастер сохраняет введенные данные
Конец сценария |
| Alternate flow | 4a Автомобиль зарегистрирован на другого клиента
    4a1 Система выводит сообщение: “Автомобиль зарегистрирован на другого клиента, привязать его к данному клиенту? Да, Нет, Отмена”
    4а2 Мастер по документам получает подтверждение, что автомобиль уже принадлежит данному клиенту и привязывает его к этому клиенту. |
| Exceptional Flow | 3a. Клиент с такими данными уже зарегистрирован
   3a1. Система выводит сообщение, что клиент уже зарегистрирован и не сохраняет введенные данные. |

| Use case | BUC02.1 Записать клиента на ремонт |
| --- | --- |
| FRQ | FRQ9.1 Редактирование загрузки рабочих боксов. |
| User story | US02 Я, как мастер СТО, хочу записывать клиентов на ремонт, чтобы в СТО была информация о предстоящих ремонтах, а клиенты могли выбрать удобное для них время. |
|  | Описывается сценарий записи клиента на ремонт |
| Область действия | Мастер СТО - система |
| Основной актор | Мастер СТО |
| Участники и интересы | Клиент заранее записывается, чтобы гарантированно получить услугу в выбранное им время, мастер СТО - планирует работы механиков, загрузку боксов, получает возможность заранее заказать необходимые запчасти и расходные материалы. |
| Предусловие | Клиент обратился |
| Минимальные гарантии | нет |
| Результат | Клиент записан на ремонт |
| Basic flow | 1. Мастер открывает форму записи клиента
2. Мастер выбирает клиента из справочника
3. Мастер выбирает диапазон дат
4. Мастер вводит тип работ
5. Система выводит список свободных боксов, которые могут использоваться для выполнения работ данного типа, и механиков, обладающих квалификацией для выполнения работ данного типа, с указанием временных диапазонов таким образом, чтобы в этом диапазоне одновременно был свободный бокс и свободный механик и диапазона времени было достаточно для выполнения работ данного типа.
6. Мастер выбирает бокс, механика и временной диапазон 
7. Мастер сохраняет запись клиента
Конец сценария |
| Alternate flow | 2a Клиент не зарегистрирован
   2a1 Мастер выполняет регистрацию клиента (BUC01.1 Зарегистрировать нового клиента)
4а. Мастер оставляет тип работ не выбранным
  4а1 Система выводит сообщение: “Тип работ не выбран, будут выведены все свободные боксы и мастера, подтверждаете? Да, Нет” |
| Exceptional Flow | 3а. Мастер выбирает диапазон дат больше месяца
   3a1. Система не дает выбрать диапазон больше месяца. |

| Use case | BUC03.1 Создать наряд-заказ |
| --- | --- |
| FRQ | FRQ11.1 Создание нового наряд-заказа |
| User story | US03 Я, как Мастер СТО, хочу работать с наряд-заказами, чтобы учитывать работы и использованные в работах запчасти. |
| Описание | Описывается сценарий создания нового наряд-заказа |
| Область действия | Мастер СТО - система |
| Основной актор | Мастер СТО |
| Участники и интересы | Клиент получает гарантированную услугу, мастер - согласованный перечень работ |
| Предусловие | 1. Клиент предварительно дал согласие на ремонт |
| Минимальные гарантии | Обсудили наряд-заказ, создали черновик наряд-заказа |
| Результат | Сформирован наряд-заказ |
| Basic flow | 1.	Мастер открывает форму создания наряд-заказа
2.	Мастер вводит: данные клиента, данные автомобиля
3.	Система верифицирует введенные данные 
4.	Система выводит рекомендуемые работы и запчасти для данного автомобиля
5.	Мастер корректирует список работ: удаляет ненужные, добавляет новые из справочника работ.
6.	Мастер корректирует список запчастей: удаляет ненужные, добавляет новые из справочника запчастей.
7.	Система подтверждает наличие определённой номенклатуры запчастей, при отсутствии запчасти на складе предлагает варианты на других складах
8.	Мастер сохраняет и выводит на печать наряд-заказ
Конец сценария |
| Alternate flow | 2a. Мастер вводит некорректные данные клиента:
    2a1. Система предлагает варианты клиента с похожим написанием (не более 5)
2b Клиент не зарегистрирован
   2b1 Мастер выполняет регистрацию клиента (BUC01.1 Зарегистрировать нового клиента)
5a. Мастер случайно удаляет из предложенного списка работ нужную:
    5a1. Система при сохранении выводит предупреждение: “Рекомендуемые работы были удалены, восстановить? Да, Нет, Не предупреждать.”
6a. Мастер случайно удаляет из предложенного списка запчастей нужную:
    6a1. Система при сохранении выводит предупреждение: “Рекомендуемые запчасти были удалены, восстановить? Да, Нет, Не предупреждать.”
8а. Некоторые запчасти отсутствуют на складе СТО, но есть в наличии на других складах, а Мастер не выбрал эти запчасти:
    8а1. Система при сохранении выводит предупреждение: “Не выбраны запчасти в наличии на других складах, вы уверены? Да, Нет.” |
| Exceptional Flow |  8b. Принтер недоступен:
    8b1. Система выводит сообщение: “Принтер недоступен, включите принтер. Да, Отмена” |

| Use case | BUC04.1 Зарегистрировать отказ клиента |
| --- | --- |
| FRQ | //TO DO |
| User story | US04 Я, как Мастер СТО, хочу работать с отказами клиентов, чтобы накапливать статистику для принятия решений по устранению причин отказов. |
| Описание | Описывается сценарий регистрации отказа клиента |
| Область действия | Мастер СТО - система |
| Основной актор | Мастер СТО |
| Участники и интересы | Мастер накапливает статистику отказов для принятия решений по устранению причин отказов. |
| Предусловие | см. триггер |
| Триггер | Клиент отказался от ремонта |
| Минимальные гарантии | нет |
| Результат | Зарегистрирован отказ клиента |
| Basic flow | 1. Мастер открывает форму регистрации отказа
2. Мастер выбирает: 
    - клиента из справочника клиентов (опционально)
    - типовую причину отказа из справочника (опционально)
    - заполняет комментарий (опционально)
3. Мастер сохраняет введенные данные
4. Система проверяет введенные данные
Конец сценария |
| Alternate flow | нет |
| Exceptional Flow | 2a. Мастер не заполнил ни причину отказа, ни комментарий
    4а1. Система выводит сообщение: “Заполните причину отказа или комментарий!” |